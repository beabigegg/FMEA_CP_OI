### 专案开发待办事项清單 (Project To-Do List) ###

### 第一阶段：核心逻辑与概念验证 (Phase 1: Core Logic & PoC) - ✅ 已完成

- [x] 1. 文件解析器: 已开发 FMEA 及 CP 文件的 Excel 解析模組。
- [x] 2. AI 整合: 已串接 DIFY AI 服务，可将解析后的资料进行结构化处理。
- [x] 3. 核心比对逻辑: 已开发比对 FMEA 与 CP 结构化资料并产生分析报告的基础功能。
- [x] 4. 命令列应用: 已整合上述功能为一个个可执行的 Python 脚步 (`main.py`)，能处理指定檔案并在终端机印出报告。
- [x] 5. Web 应用程式原型: 已使用 FastAPI 建立后端 API 服务，并设计了核心资料库结构 (`fmcp_documents`, `fmcp_items`, `fmcp_associations`)。

### 第二阶段：Web 应用程式化与前端介面 (Phase 2: Web Application & Frontend UI) - 待办

- [ ] 1. 变更与修改纪录 (前端): 
    - [ ] 开发歷史纪录展示介面，呼叫 `GET /items/{item_id}/history` API。
    - [ ] (建议) 引入文字比对工具，以视觉化方式呈现内容差异。
- [ ] 2. AI 建议呈现 (前端): 
    - [ ] 当使用者点选一个 FMEA 条目时，呼叫 `POST /ai/suggest-association/{fmea_item_id}` API。
    - [ ] 接收回传的建议 ID 列表，并在 CP 条目列表中以高亮或其他视觉化方式标示出来。
- [ ] 3. Web UI 介面开发: 开发一个完整的前端应用程式 (例如使用 Vue, React 或 Angular)。
    - [ ] 檔案上传介面。
    - [ ] 资料库文件列表展示页面。
- [ ] 4. 线上编辑与维护功能:
    - [ ] 为 FMEA/CP 条目提供一个可编辑的表格或表单介面。
    - [ ] 提供视觉化的方式让使用者点选 FMEA 与 CP 条目来建立关联。

### 第三阶段：系统与权限 (Phase 3: System & Permissions) - 待办

- [ ] 1. 系统帐号管理 (前端):
    - [ ] 建立使用者登入与註册页面（註册功能可能需要对管理员开放）。
    - [ ] 实作登入逻辑，在成功登入后储存 JWT Token。
    - [ ] 在每一次对后端 API 的请求中，附上 JWT Token (通常在 Authorization Header 中)。

### 第四阶段：报表与汇出 (Phase 4: Reporting & Exporting) - 待办

- [ ] 1. 文件汇出功能 (前端): 
    - [ ] 在文件列表或文件详情页面，新增一个「汇出 Excel」按钮。
    - [ ] 点撃按钮后，呼叫 `GET /export/{document_id}` API 来下载檔案。

### 后端已完成清单 (Backend ✅ DONE)

- ✅ **变更与修改纪录 (Phase 2)**: 已新增 `fmcp_item_history` 表，并在更新 Item 时自动记录歷史。已提供 `GET /items/{item_id}/history` API。
- ✅ **AI 建议呈现 (Phase 2)**: 已升級 AI 建议 API，可回传前三大相关 CP 条目建议，并自动过濾已关联项目。
- ✅ **系统帐号管理与 RBAC (Phase 3)**: 已新增 `fmcp_users` 表，并建立完整的註册/登入逻辑与 JWT 认证。已实现角色型存取控制，保护了管理员专属端点，并在应用启动时自动建立初始管理员。
- ✅ **文件汇出功能 (Phase 4)**: 已建立 `GET /export/{document_id}` API，可将 FMEA 文件及其关联的 CP 资料汇出为格式化的 Excel 檔案。

### 其他项目 (Others) - 待办

- [ ] 1. 解析器健壮性与资料验证: 针对更多不同版本或格式的文件进行测试，提升解析器的容错能力，并在资料入库前增加验证步骤。
